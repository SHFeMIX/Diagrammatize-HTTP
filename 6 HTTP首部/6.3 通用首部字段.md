### 6.3.1 Cashe-Control
通过指定首部字段Cashe-Control的指令，就能操作缓存的工作机制。

**表示是否能缓存的指令**
* 当使用**public**指令时，则明确表明其他用户也可以利用缓存。
* 当指定**private**指令后，响应只以特定的用户作为对象，这与pubilc指令的行为相反。
  缓存服务器会对该特定用户提供资源缓存的服务，对于其他用户发送过来的请求，代理服务器则不会返回缓存。
* 使用**no-cache**指令的目的是为了防止从缓存中返回过期的资源。如果客户端发送的请求中包含no-cache，缓存服务器必须把请求转发给源服务器；如果服务器返回的响应中包含no-cache，则缓存服务器不能对资源进行缓存。

**控制可执行缓存的对象的指令**
* 使用**no-store**指令时，暗示请求或响应中包含机密信息，规定缓存不能在本地存储请求或响应的任一部分。

**指定缓存期限和认证的指令**
* **s-maxage**指令的功能和max-age相同，但是只适用于供多位用户使用的共享缓存。当使用s-maxage指令后，直接忽略对Expires首部字段及max-age指令的处理。
* 当客户端发送的请求中包含**max-age**指令时，如果判断缓存资源的缓存时间数值比指定的数值更小，那么就使用缓存，否则转发请求给源服务器。当服务器返回的响应中包含**max-age**指令，缓存服务器将不对资源的有效性再作确认，而max-age数值代表资源保存为缓存的最长时间。
* **min-fresh**指令要求缓存服务器返回至少还未过指定时间的缓存资源。
* 使用**max-stale**指令时，即使缓存资源过期，只要仍处于max-stale指定的时间内，缓存服务器仍然会向客户端返回资源。
* 使用**only-if-cached**指令表示客户端仅在缓存服务器本地缓存目标资源的情况下才会要求其返回。换而言之，该指令要求缓存服务器不重新加载响应，也不会再次确认资源有效性。
* 使用**must-revalidate**指令，代理会向源服务器再次验证即将返回的响应缓存目前是否仍然有效。
* **proxy-revalidate**指令要求所有的缓存服务器在接收到客户端带有该指令的请求返回响应之前，必须再次验证缓存的有效性。
* **no-transform**指令规定无论是在请求还是响应中，缓存都不能改变实体主体的媒体类型，可以防止缓存或代理压缩图片等类似操作。


### 6.3.2 Connection
Connection首部字段具备如下两个作用：
* 控制不再转发给代理的首部字段：
  在客户端发送请求和服务器返回响应内，使用 Connection 首部字 段，可控制不再转发给代理的首部字段(即 Hop-by-hop 首部)。
* 管理持久连接：
  HTTP/1.1 版本的默认连接都是持久连接。为此，客户端会在持 久连接上连续发送请求。当服务器端想明确断开连接时，则指定 Connection 首部字段的值为 Close。


### 6.3.3 Date
首部字段Date表明创建HTTP报文的日期和时间。

### 6.3.4 Pragma

### 6.3.5 Trailer
首部字段 Trailer 会事先说明在报文主体后记录了哪些首部字段。该 首部字段可应用在 HTTP/1.1 版本分块传输编码时。

### 6.3.6 Transfer-Encoding
首部字段Transfer-Encoding规定了传输报文主体时采用的编码方式。HTTP/1.1的传输编码方式仅对分块传输编码有效。

### 6.3.7 Upgrade
首部字段Upgrade用于检测HTTP协议及其他协议是否可使用更高的版本进行通信，其参数值可以用来制定一个完全不同的通信协议。

Upgrade 首部字段产生作用的 Upgrade 对象仅限于客户端和邻接服务器之间。因此，使用首部字段 Upgrade 时，还需要额外指定Connection:Upgrade。

对于附有首部字段Upgrade的请求，服务器可用101 Switching Protocols状态码作为响应返回。

### 6.3.8 Via
使用首部字段 Via 是为了追踪客户端与服务器之间的请求和响应报文的传输路径。
报文经过代理或网关时，会先在首部字段 Via 中附加该服务器的信 息，然后再进行转发。这个做法和traceroute及电子邮 Received 首部的工作机制很类似。
首部字段 Via 不仅用于追踪报文的转发，还可避免请求回环的发生。 所以必须在经过代理时附加该首部字段内容。
Via首部是为了追踪传输路径，所以经常会和TRACE方法一起使用。

### 6.3.9 Warning
HTTP/1.1 的 Warning 首部是从 HTTP/1.0 的响应首部(Retry-After)演变过来的。该首部通常会告知用户一些与缓存相关的问题的警告。