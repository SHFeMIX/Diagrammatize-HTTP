### 9.3.1 WebSocket的设计与功能
WebSocket，即Web浏览器与Web服务器之间的全双工通信标准，主要是为了解决Ajax和XMLHttpRequest附带的缺陷所引起的问题。

### 9.3.1 WebSocket协议
一旦Web服务器与客户端之间急哦安利起了WebSocket协议的通信连接，之后所欲的通信都依靠这个专用协议进行，通信过程中可互相发送任意格式的数据。

由于是建立在HTTP基础上的协议，因此连接的发起方仍是客户端。一旦确立WebSocket通信连接，无论服务器还是客户端，任意一方都可直接向对方发送报文。

**WebScoekt协议的主要特点有：**
* 推送功能：支持由服务器向客户端推送数据的功能，服务器可直接发送数据，不必等待客户端的请求。
* 减少通信量：只要建立起WebSocket连接，就希望一直保持连接状态。和HTTP相比，不但每次连接时的总开销减少，而且由于WebSocket的首部信息很小，通信量页相应减少了。

为了实现WebSocket通信，在HTTP连接建立后，需要完成一次“握手”的步骤：
* 握手*请求：需要用到HTTP的Upgrade首部字段，告知服务器通信协议发生改变。
* 握手*响应：服务器返回状态码 101 Switching Protocols，表示协议切换成功。

成功确立WebSocket连接后，通信时不再使用HTTP的数据帧，而采用WebSocket独立的数据帧。